Search.setIndex({"docnames": ["index", "main", "tools"], "filenames": ["index.rst", "main.rst", "tools.rst"], "titles": ["Welcome the documentation of the IRNL RDT Correction!", "Nonlinear Correction calculation in the IRs", "Constants"], "terms": {"thi": [0, 1, 2], "provid": 0, "script": 0, "power": [0, 1, 2], "nonlinear": 0, "corrector": [0, 1, 2], "hl": [0, 2], "lhc": [0, 1, 2], "insert": [0, 1], "region": [0, 1], "base": [0, 1, 2], "calcul": [0, 2], "ir": [0, 2], "irnl_rdt_correct": [0, 1, 2], "constant": 0, "equat": [0, 1], "system": 0, "build_equation_system": [0, 2], "get_available_corrector": [0, 2], "get_corrector_coeffici": [0, 2], "get_current_rdt_map": [0, 2], "get_elements_integr": [0, 2], "get_side_sign": [0, 2], "init_corrector_and_optics_valu": [0, 2], "optics_upd": [0, 2], "restore_optics_valu": [0, 2], "solv": [0, 2], "solve_equation_system": [0, 2], "input": [0, 1], "option": [0, 1], "check_opt": [0, 2], "io": 0, "handl": 0, "build_correction_df": [0, 2], "build_correction_str": [0, 2], "build_correction_str_from_df": [0, 2], "get_and_write_output": [0, 2], "get_opt": [0, 2], "get_tf": [0, 2], "maybe_switch_sign": [0, 2], "ircorrector": [0, 2], "check_corrector_ord": [0, 2], "get_needed_ord": [0, 2], "sort_rdt": [0, 2], "util": 0, "dotdict": [0, 2], "optic": [0, 1, 2], "timer": [0, 2], "get_max_knl_ord": [0, 2], "i_pow": [0, 2], "is_anti_mirror_symmetr": [0, 2], "log_setup": [0, 2], "index": 0, "modul": 0, "search": 0, "page": 0, "perform": [1, 2], "local": 1, "reson": [1, 2], "drive": [1, 2], "term": [1, 2], "rdt": 1, "principl": 1, "describ": 1, "bruningdynamicaperturestudies2004": 1, "addit": [1, 2], "feed": [1, 2], "down": [1, 2], "us": [1, 2], "lower": [1, 2], "order": [1, 2], "detail": 1, "can": [1, 2], "found": [1, 2], "dillynonlinearircorrections2023": [1, 2], "easi": 1, "allow": 1, "give": 1, "error": [1, 2], "need": [1, 2], "none": [1, 2], "list": [1, 2], "so": [1, 2], "length": 1, "ar": [1, 2], "still": [1, 2], "same": 1, "i": [1, 2], "clear": 1, "correspond": 1, "twiss": [1, 2], "beam": [1, 2], "should": [1, 2], "assum": [1, 2], "all": [1, 2], "zero": [1, 2], "more": 1, "than": [1, 2], "two": 1, "given": [1, 2], "e": [1, 2], "g": [1, 2], "find": 1, "15cm": 1, "30cm": 1, "both": [1, 2], "medium": 1, "mayb": 1, "sort": [1, 2], "highest": [1, 2], "instead": 1, "via": [1, 2], "assign": 1, "befor": [1, 2], "might": 1, "caus": 1, "other": [1, 2], "problem": 1, "though": 1, "To": 1, "thought": 1, "about": [1, 2], "consid": 1, "switch": [1, 2], "sign": [1, 2], "refer": [1, 2], "frame": 1, "1": [1, 2], "That": 1, "mean": 1, "x": [1, 2], "dx": 1, "anti": [1, 2], "mirror": [1, 2], "kn": [1, 2], "": [1, 2], "l": [1, 2], "from": [1, 2], "4": [1, 2], "2": [1, 2], "ignor": [1, 2], "relat": 1, "BUT": 1, "doe": 1, "realli": 1, "work": [1, 2], "implement": [1, 2], "It": 1, "check": [1, 2], "test": 1, "take": 1, "phase": 1, "advanc": 1, "between": [1, 2], "element": [1, 2], "point": 1, "entranc": 1, "account": 1, "would": 1, "numer": 1, "actual": 1, "hard": 1, "addition": 1, "one": [1, 2], "try": 1, "optim": 1, "posit": 1, "veri": 1, "problemat": 1, "we": [1, 2], "have": [1, 2], "each": [1, 2], "side": [1, 2], "per": [1, 2], "becom": 1, "non": 1, "linear": [1, 2], "now": 1, "which": [1, 2], "linearli": 1, "depend": 1, "o": 1, "bruen": 1, "et": 1, "al": 1, "dynam": 1, "apertur": 1, "studi": 1, "separ": 1, "dipol": 1, "2004": 1, "http": 1, "cd": 1, "cern": 1, "ch": 1, "record": 1, "742967": 1, "j": 1, "dilli": 1, "r": [1, 2], "tom\u00e1": 1, "A": 1, "flexibl": 1, "algorithm": 1, "2023": 1, "github": 1, "com": 1, "pylhc": 1, "blob": 1, "master": 1, "latex": 1, "note": 1, "pdf": 1, "author": 1, "joschua": 1, "main": [1, 2], "opt": [1, 2], "tupl": [1, 2], "str": [1, 2], "tfsdatafram": [1, 2], "sourc": [1, 2], "get": [1, 2], "minim": 1, "keyword": 1, "argument": [1, 2], "path": [1, 2], "datafram": [1, 2], "file": [1, 2], "contain": [1, 2], "onli": [1, 2], "ones": 1, "present": [1, 2], "requir": [1, 2], "less": 1, "int": [1, 2], "come": 1, "output": [1, 2], "write": [1, 2], "command": [1, 2], "tfs_df": 1, "extens": 1, "replac": [1, 2], "tf": [1, 2], "madx": 1, "respect": 1, "default": [1, 2], "dict": [1, 2], "format": [1, 2], "fjklm": 1, "beta": 1, "symmetri": [1, 2], "jk": 1, "lm": 1, "The": [1, 2], "either": [1, 2], "appropri": 1, "determin": 1, "jklmn": 1, "altern": 1, "dictionari": [1, 2], "where": 1, "kei": [1, 2], "name": [1, 2], "valu": [1, 2], "b5": 1, "normal": [1, 2], "decapol": 1, "a3": [1, 2], "skew": [1, 2], "sextupol": 1, "etc": [1, 2], "If": [1, 2], "higher": [1, 2], "In": 1, "case": [1, 2], "multipl": 1, "increas": 1, "iter": [1, 2], "standard": 1, "accel": [1, 2], "see": [1, 2], "default_rdt": [1, 2], "rdts2": [1, 2], "second": [1, 2], "differ": [1, 2], "first": [1, 2], "rule": 1, "acceler": [1, 2], "One": 1, "hllhc": [1, 2], "feeddown": [1, 2], "includ": [1, 2], "0": [1, 2], "ip": [1, 2], "5": 1, "8": 1, "solver": [1, 2], "lstsq": 1, "inv": [1, 2], "update_opt": [1, 2], "bool": [1, 2], "start": [1, 2], "updat": [1, 2], "strength": [1, 2], "after": [1, 2], "true": [1, 2], "ignore_corrector_set": [1, 2], "current": [1, 2], "set": [1, 2], "initi": [1, 2], "condit": [1, 2], "fals": [1, 2], "ignore_missing_column": [1, 2], "miss": [1, 2], "column": [1, 2], "ani": [1, 2], "rais": [1, 2], "an": [1, 2], "re": [1, 2], "previous": [1, 2], "count": [1, 2], "return": [1, 2], "string": 1, "panda": 1, "type": [1, 2], "These": 2, "reli": 2, "lot": 2, "scheme": 2, "build": 2, "map": 2, "eq": 2, "40": 2, "equation_system": 2, "rdt_map": 2, "sequenc": 2, "optics_seq": 2, "_supportsarrai": 2, "dtype": 2, "_nestedsequ": 2, "float": 2, "complex": 2, "byte": 2, "group": 2, "share": 2, "paramet": 2, "rdtmap": 2, "object": 2, "subset": 2, "thei": 2, "been": 2, "common": 2, "correct": 2, "integr": 2, "rh": 2, "b_matrix": 2, "np": 2, "arrai": 2, "n_rdt": 2, "n_corrector": 2, "field_compon": 2, "avail": 2, "presenc": 2, "skip": 2, "left": 2, "right": 2, "warn": 2, "issu": 2, "environ": 2, "field": 2, "compon": 2, "b4": 2, "b": 2, "matrix": 2, "entri": 2, "lh": 2, "coeffici": 2, "z": 2, "imaginari": 2, "also": 2, "make": 2, "real": 2, "creat": 2, "new": 2, "function": 2, "call": 2, "while": 2, "loop": 2, "remaining_rdt_map": 2, "last": 2, "interrupt": 2, "when": 2, "remain": 2, "3": 2, "consist": 2, "n": 2, "exp": 2, "i\u03c0n\u03b8": 2, "s_w": 2, "s_ip": 2, "part": 2, "16": 2, "\u03b8": 2, "later": 2, "17": 2, "ignore_set": 2, "save": 2, "origin": 2, "restor": 2, "otherwis": 2, "thrown": 2, "data": 2, "recoveri": 2, "anywai": 2, "empti": 2, "saved_valu": 2, "possibl": 2, "lowest": 2, "abl": 2, "split": 2, "end": 2, "follow": 2, "number": 2, "lstq": 2, "defin": 2, "its": 2, "inform": 2, "result": 2, "transfer": 2, "intern": 2, "wa": 2, "store": 2, "hand": 2, "solver_map": 2, "below": 2, "valid": 2, "input_opt": 2, "assert": 2, "sens": 2, "add": 2, "what": 2, "pars": 2, "commandlin": 2, "todo": 2, "dataclass": 2, "class": 2, "most": 2, "union": 2, "descript": 2, "read": 2, "io_handl": 2, "desir": 2, "convert": 2, "mad": 2, "correctors_df": 2, "out_path": 2, "suffix": 2, "ad": 2, "chang": 2, "fit": 2, "instanc": 2, "strorpathordatafram": 2, "fill": 2, "combin": 2, "alreadi": 2, "load": 2, "due": 2, "direct": 2, "rotat": 2, "180deg": 2, "around": 2, "y": 2, "axi": 2, "magnet": 2, "show": 2, "a1": 2, "k0sl": 2, "b2": 2, "k1l": 2, "k2sl": 2, "k3l": 2, "bring": 2, "knl": 2, "definit": 2, "rdt_handl": 2, "represent": 2, "attribut": 2, "feed_down": 2, "compar": 2, "plu": 2, "involv": 2, "want": 2, "maximum": 2, "low": 2, "high": 2, "revers": 2, "orient": 2, "rdtinputtyp": 2, "throughout": 2, "arg": 2, "kwarg": 2, "access": 2, "print_fun": 2, "callabl": 2, "built": 2, "print": 2, "collect": 2, "time": 2, "summari": 2, "df": 2, "column_nam": 2, "knsl": 2, "repres": 2, "symmetr": 2, "upon": 2, "up": 2, "basic": 2, "logger": 2}, "objects": {"irnl_rdt_correction": [[2, 0, 0, "-", "constants"], [2, 0, 0, "-", "equation_system"], [2, 0, 0, "-", "input_options"], [2, 0, 0, "-", "io_handling"], [1, 0, 0, "-", "main"], [2, 0, 0, "-", "rdt_handling"], [2, 0, 0, "-", "utilities"]], "irnl_rdt_correction.equation_system": [[2, 1, 1, "", "build_equation_system"], [2, 1, 1, "", "get_available_correctors"], [2, 1, 1, "", "get_corrector_coefficient"], [2, 1, 1, "", "get_current_rdt_maps"], [2, 1, 1, "", "get_elements_integral"], [2, 1, 1, "", "get_side_sign"], [2, 1, 1, "", "init_corrector_and_optics_values"], [2, 1, 1, "", "optics_update"], [2, 1, 1, "", "restore_optics_values"], [2, 1, 1, "", "solve"], [2, 1, 1, "", "solve_equation_system"]], "irnl_rdt_correction.input_options": [[2, 1, 1, "", "check_opt"]], "irnl_rdt_correction.io_handling": [[2, 1, 1, "", "build_correction_df"], [2, 1, 1, "", "build_correction_str"], [2, 1, 1, "", "build_correction_str_from_df"], [2, 1, 1, "", "get_and_write_output"], [2, 1, 1, "", "get_optics"], [2, 1, 1, "", "get_tfs"], [2, 1, 1, "", "maybe_switch_signs"]], "irnl_rdt_correction.main": [[1, 1, 1, "", "irnl_rdt_correction"]], "irnl_rdt_correction.rdt_handling": [[2, 2, 1, "", "IRCorrector"], [2, 2, 1, "", "RDT"], [2, 1, 1, "", "check_corrector_order"], [2, 1, 1, "", "get_needed_orders"], [2, 1, 1, "", "sort_rdts"]], "irnl_rdt_correction.utilities": [[2, 2, 1, "", "DotDict"], [2, 2, 1, "", "Optics"], [2, 2, 1, "", "Timer"], [2, 1, 1, "", "get_max_knl_order"], [2, 1, 1, "", "i_pow"], [2, 1, 1, "", "is_anti_mirror_symmetric"], [2, 1, 1, "", "log_setup"]]}, "objtypes": {"0": "py:module", "1": "py:function", "2": "py:class"}, "objnames": {"0": ["py", "module", "Python module"], "1": ["py", "function", "Python function"], "2": ["py", "class", "Python class"]}, "titleterms": {"welcom": 0, "document": 0, "irnl": 0, "rdt": [0, 2], "correct": [0, 1], "packag": 0, "refer": 0, "main": 0, "tool": 0, "indic": 0, "tabl": 0, "nonlinear": 1, "calcul": 1, "ir": 1, "todo": 1, "constant": 2, "equat": 2, "system": 2, "input": 2, "option": 2, "io": 2, "handl": 2, "util": 2}, "envversion": {"sphinx.domains.c": 2, "sphinx.domains.changeset": 1, "sphinx.domains.citation": 1, "sphinx.domains.cpp": 8, "sphinx.domains.index": 1, "sphinx.domains.javascript": 2, "sphinx.domains.math": 2, "sphinx.domains.python": 3, "sphinx.domains.rst": 2, "sphinx.domains.std": 2, "sphinx.ext.todo": 2, "sphinx.ext.viewcode": 1, "sphinx": 57}, "alltitles": {"Welcome the documentation of the IRNL RDT Correction!": [[0, "welcome-the-documentation-of-the-irnl-rdt-correction"]], "Package Reference": [[0, "package-reference"]], "Main": [[0, null]], "Tools": [[0, null]], "Indices and tables": [[0, "indices-and-tables"]], "Nonlinear Correction calculation in the IRs": [[1, "nonlinear-correction-calculation-in-the-irs"]], "Todo": [[1, "id3"]], "Constants": [[2, "constants"]], "Equation System": [[2, "equation-system"]], "Input Options": [[2, "input-options"]], "IO Handling": [[2, "io-handling"]], "RDT Handling": [[2, "rdt-handling"]], "Utilities": [[2, "utilities"]]}, "indexentries": {"irnl_rdt_correction() (in module irnl_rdt_correction.main)": [[1, "irnl_rdt_correction.main.irnl_rdt_correction"]], "irnl_rdt_correction.main": [[1, "module-irnl_rdt_correction.main"]], "module": [[1, "module-irnl_rdt_correction.main"], [2, "module-irnl_rdt_correction.constants"], [2, "module-irnl_rdt_correction.equation_system"], [2, "module-irnl_rdt_correction.input_options"], [2, "module-irnl_rdt_correction.io_handling"], [2, "module-irnl_rdt_correction.rdt_handling"], [2, "module-irnl_rdt_correction.utilities"]], "dotdict (class in irnl_rdt_correction.utilities)": [[2, "irnl_rdt_correction.utilities.DotDict"]], "ircorrector (class in irnl_rdt_correction.rdt_handling)": [[2, "irnl_rdt_correction.rdt_handling.IRCorrector"]], "optics (class in irnl_rdt_correction.utilities)": [[2, "irnl_rdt_correction.utilities.Optics"]], "rdt (class in irnl_rdt_correction.rdt_handling)": [[2, "irnl_rdt_correction.rdt_handling.RDT"]], "timer (class in irnl_rdt_correction.utilities)": [[2, "irnl_rdt_correction.utilities.Timer"]], "build_correction_df() (in module irnl_rdt_correction.io_handling)": [[2, "irnl_rdt_correction.io_handling.build_correction_df"]], "build_correction_str() (in module irnl_rdt_correction.io_handling)": [[2, "irnl_rdt_correction.io_handling.build_correction_str"]], "build_correction_str_from_df() (in module irnl_rdt_correction.io_handling)": [[2, "irnl_rdt_correction.io_handling.build_correction_str_from_df"]], "build_equation_system() (in module irnl_rdt_correction.equation_system)": [[2, "irnl_rdt_correction.equation_system.build_equation_system"]], "check_corrector_order() (in module irnl_rdt_correction.rdt_handling)": [[2, "irnl_rdt_correction.rdt_handling.check_corrector_order"]], "check_opt() (in module irnl_rdt_correction.input_options)": [[2, "irnl_rdt_correction.input_options.check_opt"]], "get_and_write_output() (in module irnl_rdt_correction.io_handling)": [[2, "irnl_rdt_correction.io_handling.get_and_write_output"]], "get_available_correctors() (in module irnl_rdt_correction.equation_system)": [[2, "irnl_rdt_correction.equation_system.get_available_correctors"]], "get_corrector_coefficient() (in module irnl_rdt_correction.equation_system)": [[2, "irnl_rdt_correction.equation_system.get_corrector_coefficient"]], "get_current_rdt_maps() (in module irnl_rdt_correction.equation_system)": [[2, "irnl_rdt_correction.equation_system.get_current_rdt_maps"]], "get_elements_integral() (in module irnl_rdt_correction.equation_system)": [[2, "irnl_rdt_correction.equation_system.get_elements_integral"]], "get_max_knl_order() (in module irnl_rdt_correction.utilities)": [[2, "irnl_rdt_correction.utilities.get_max_knl_order"]], "get_needed_orders() (in module irnl_rdt_correction.rdt_handling)": [[2, "irnl_rdt_correction.rdt_handling.get_needed_orders"]], "get_optics() (in module irnl_rdt_correction.io_handling)": [[2, "irnl_rdt_correction.io_handling.get_optics"]], "get_side_sign() (in module irnl_rdt_correction.equation_system)": [[2, "irnl_rdt_correction.equation_system.get_side_sign"]], "get_tfs() (in module irnl_rdt_correction.io_handling)": [[2, "irnl_rdt_correction.io_handling.get_tfs"]], "i_pow() (in module irnl_rdt_correction.utilities)": [[2, "irnl_rdt_correction.utilities.i_pow"]], "init_corrector_and_optics_values() (in module irnl_rdt_correction.equation_system)": [[2, "irnl_rdt_correction.equation_system.init_corrector_and_optics_values"]], "irnl_rdt_correction.constants": [[2, "module-irnl_rdt_correction.constants"]], "irnl_rdt_correction.equation_system": [[2, "module-irnl_rdt_correction.equation_system"]], "irnl_rdt_correction.input_options": [[2, "module-irnl_rdt_correction.input_options"]], "irnl_rdt_correction.io_handling": [[2, "module-irnl_rdt_correction.io_handling"]], "irnl_rdt_correction.rdt_handling": [[2, "module-irnl_rdt_correction.rdt_handling"]], "irnl_rdt_correction.utilities": [[2, "module-irnl_rdt_correction.utilities"]], "is_anti_mirror_symmetric() (in module irnl_rdt_correction.utilities)": [[2, "irnl_rdt_correction.utilities.is_anti_mirror_symmetric"]], "log_setup() (in module irnl_rdt_correction.utilities)": [[2, "irnl_rdt_correction.utilities.log_setup"]], "maybe_switch_signs() (in module irnl_rdt_correction.io_handling)": [[2, "irnl_rdt_correction.io_handling.maybe_switch_signs"]], "optics_update() (in module irnl_rdt_correction.equation_system)": [[2, "irnl_rdt_correction.equation_system.optics_update"]], "restore_optics_values() (in module irnl_rdt_correction.equation_system)": [[2, "irnl_rdt_correction.equation_system.restore_optics_values"]], "solve() (in module irnl_rdt_correction.equation_system)": [[2, "irnl_rdt_correction.equation_system.solve"]], "solve_equation_system() (in module irnl_rdt_correction.equation_system)": [[2, "irnl_rdt_correction.equation_system.solve_equation_system"]], "sort_rdts() (in module irnl_rdt_correction.rdt_handling)": [[2, "irnl_rdt_correction.rdt_handling.sort_rdts"]]}})